extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    +alert-success(3000)
    +alert-error(5000)
    
    .container-fluid
        // ================= HEADER =================
        .d-flex.justify-content-between.align-items-center.mb-4
            h2.fw-bold.mb-0 TỔNG QUAN
            .d-flex.gap-2
                button.btn.btn-success(type="button" id="exportExcel")
                    i.fa-solid.fa-file-excel.me-2
                    | Xuất Excel

                button.btn.btn-danger(type="button" id="exportWord")
                    i.fa-solid.fa-file-word.me-2
                    | Xuất Word

        // ================= STAT CARDS =================
        .row.mb-4
            .col-md-3.mb-3
                .card.text-white.bg-primary.h-100
                    .card-body
                        h6.card-title.mb-2 Doanh thu hôm nay
                        p.card-text.fw-bold.fs-5
                            | #{Number(statistics.todayRevenue).toLocaleString('vi-VN')} VND

            .col-md-3.mb-3
                .card.text-white.bg-success.h-100
                    .card-body
                        h6.card-title.mb-2 Doanh thu tháng này
                        p.card-text.fw-bold.fs-5
                            | #{Number(statistics.monthRevenue).toLocaleString('vi-VN')} VND

            .col-md-3.mb-3
                .card.text-white.bg-info.h-100
                    .card-body
                        h6.card-title.mb-2 Tổng số đơn hàng
                        p.card-text.fw-bold.fs-5
                            | #{statistics.totalOrders}

            .col-md-3.mb-3
                .card.text-white.bg-warning.h-100
                    .card-body
                        h6.card-title.mb-2 Tổng doanh thu
                        p.card-text.fw-bold.fs-5
                            | #{Number(statistics.totalRevenue).toLocaleString('vi-VN')} VND

        // ================= CHART =================
        .card
            .card-header
                .d-flex.justify-content-between.align-items-center.flex-wrap.gap-2
                    h4.mb-0 Biểu đồ thống kê doanh thu

                    
                    .d-flex.gap-2.flex-wrap
                        button.btn.btn-outline-primary.btn-sm(
                            type="button"
                            data-chart-type="day"
                        ) Theo ngày

                        button.btn.btn-outline-primary.btn-sm(
                            type="button"
                            data-chart-type="month"
                        ) Theo tháng

                        button.btn.btn-outline-primary.btn-sm(
                            type="button"
                            data-chart-type="quarter"
                        ) Theo quý

                        button.btn.btn-outline-primary.btn-sm(
                            type="button"
                            data-chart-type="year"
                        ) Theo năm

            .card-body
                canvas#revenueChart(style="max-height: 400px;")

    // ================= SCRIPTS =================
    script(src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js")
    script(src="/admin/js/dashboard.js")
